<mat-progress-bar *ngIf="cargando" mode="indeterminate"></mat-progress-bar>

<button mat-button *ngIf="filtrarPorAplicacion" [matMenuTriggerFor]="menu" [disabled]="cargando" class="boton-aplicadas-filtro">{{ leyendaFiltroAplicacion() }} <mat-icon [ngStyle]="{'color': '#2DA442'}">
    keyboard_arrow_down</mat-icon></button>
<mat-menu #menu="matMenu">
  <button *ngIf="filtro != null" mat-menu-item (click)="seleccionarFiltroAplicacion(null)"
    [ngClass]="{'activo': filtro.aplicado === null, 'inactivo': filtro.aplicado !== null }">
    Todas
  </button>

  <button *ngIf="filtro != null" mat-menu-item (click)="seleccionarFiltroAplicacion(false)"
    [ngClass]="{'activo': filtro.aplicado === false, 'inactivo': filtro.aplicado !== false }">
    Pendientes de aplicar
  </button>

  <button *ngIf="filtro != null" mat-menu-item (click)="seleccionarFiltroAplicacion(true)"
    [ngClass]="{'activo': filtro.aplicado === true, 'inactivo': filtro.aplicado !== true }">
    Aplicadas
  </button>
</mat-menu>

<div fxLayout="row" fxLayoutAlign="space-around center" class="titulos">
  <div fxFlex="50%">Ref. de entrega</div>
  <div fxFlex="50%">{{unidadMedida | kilosTextoA}} netos</div>
</div>

<div class="contenedor-listado" fxLayout="column" fxLayoutWrap fxLayoutAlign="none" infiniteScroll
  [infiniteScrollDistance]="2" [infiniteScrollThrottle]="50" (scrolled)="onScroll()" [scrollWindow]="false">

  <div fxLayout="row" fxLayoutAlign="space-around center"
    *ngFor="let movimiento of (listadoEntregas ? listadoEntregas : [])" class="movimiento-fila"
    (click)="verDetalle(movimiento)">

    <div fxFlex="20%">
      <img class="movimiento-icono" src="{{movimiento.especie | imagenEspecie}}" />
    </div>

    <div fxFlex="50%">
      <p class="especie-cosecha">{{movimiento.especie}} {{movimiento.cosecha}}</p>
      <p class="fecha">{{movimiento.fecha}}</p>
    </div>

    <div fxFlex="40%" class="kg-netos">
      {{movimiento.kilosNetos | kilosA: unidadMedida | number: '.0-0'}}
    </div>
  </div>

</div>